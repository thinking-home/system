# Todo

- [x] сделать метод для запуска обработчиков событий с параметром асинхронного запуска
- [x] сделать автосоздание сущностей БД
- [x] регистрация таймеров
- [x] защищенный запуск действий таймеров (через хелпер + запись в лог)
- [x] объединить TimerCollection и плагин?
- [x] миграции для скриптов
- [x] скриптовые команды
- [x] фильтр списка плагинов по типу/интерфейсу (+ рефакторинг БД и скриптов)
- [x] разобраться с приведением числовых типов при вызове методов (всегда приходит вещественный тип)
- [x] возвращаемые значения для сценариев
- [x] доступ к методам, сценариям и логированию через поля объекта host
- [x] API для настроек приложения
- [x] вынести connection string в настройки
- [x] кэширование конфигурации БД (кэшируется срезствами EF)
- [x] вынести порт веб-сервера в настройки
- [x] параметры для методов HTTP API
- [x] загрузка ресурсов по HTTP
- [x] сделать кэширование ресурсов и заголовки ответа
- [x] сделать хэндлер для ресурсов асинхронным
- [x] выпилить интерфейсы I*Owner
- [x] Выпилить MEF
- [x] атрибуты для js и css ресурсов
- [x] логирование через microsoft.extensions.logging (?) - привести в порядок
- [x] пустая стартовая страница по умолчанию + настройки стартовой страницы
- [x] скриптовые события
- [x] починить двойное нажатие ENTER для выхода! https://youtrack.jetbrains.com/issue/RIDER-4677
- [x] NLog => Serilog
- [x] починить запуск в фоновом режиме

- [x] атрибуты для разделов (тип, заголовок, порядок сортировки)
- [x] списки разделов (~~системный и общий, отображать заголовок, переход в разделы, верстка списков~~)
- [x] отображение страницы ошибки (метод в application, заголовок и текст)
- [x] отображение ошибок загрузи
- [x] загрузка стилей (признак автозагрузки)
- [x] стили для списка разделов: margin-bottom: 12px; color: #999;
- [x] ПРИДУМАТЬ ПРАВИЛА ФОРМИРОВАНИЯ URL и исправить во всех проектах
- [x] ПРОВЕРИТЬ ВСЕ МЕТОДЫ HTTP API СЦЕНАРИЕВ
- [x] дописать readme для плагинов webserver (про ресурсы) и webui (про отображеие ошибки и про автозагрузку css)
- [x] проверить выполнение подписанных сценариев
- [x] общие сценарные и плагинные события для планировщика

- [x] дописать в README про буферы
- [x] починить исключение из-за обрыва mqtt соединения при выходе из приложения
- [x] отметить в документации к HTTP API обязательные параметры

- [x] HUB: вынести название события MQ в конфиг и получать с сервера из константы
- [x] HUB: отключать signalr на destroy
- [x] HUB: переподключение signalr
- [x] HUB: починить множественное выполнение обработчиков сообщений
- [x] HUB: протестировать серверные события

- [x] сделать контейнеры обработчиков (для удобного поиска), и сет обработчиков (для массового выполнения)
- [x] проверить использование реестров объектов и написать тесты

- [x] написать тесты на парсинг команд telegram
- [x] обрубать слэши команд telegram + валидировать (?)
- [x] обновить клиентские библиотеки

- [ ] сделать валидацию URL для языковых ресурсов
- [ ] написать тесты на BaseRegistry.ForEach, ToObjectRegistry, ToObjectSetRegistry и Find*
- [ ] сделать отдельное кэширование переводов на сервере и клиенте
- [ ] вынести интерфейсы сценариев в отдельный плагин

- [ ] ИЗБАВИТЬСЯ ОТ ДУБЛИРОВАНИЯ КОДА В js разделов
- [ ] ПРОВЕРИТЬ доступ к методам и сценариям через поля
  - типы параметров,
  - значения параметров по умолчанию,
  - возвращаемое значение,
  - вызов по названию поля
  - несуществующие названия
- [ ] ПРОВЕРИТЬ НЕОБХОДИМОСТЬ ДЕЙСТВИЙ ПРИ УДАЛЕНИИ РАЗДЕЛОВ И ПРЕДСТАВЛЕНИЙ
- [ ] сделать применение миграций в порядке зависимости библиотек


### webui
- [x] moment
- [x] настройка для списка разделов
- [x] починить ширину ссылки в шапке на маленьких экранах
- [x] переименовать модуль welcome в dummy и написать пояснительный текст

## alpha1

- [x] http listener (~~api~~, ~~resources~~)
- [x] scripts (~~web~~ ~~api~~, ~~events~~)
- [x] web-ui (~~core: обшие библиотеки, точка входа, layout~~)

## alpha2

- [x] web-ui (~~app list~~)
- [x] scripts UI(~~запуск скриптов~~, ~~сохранение~~, ~~удаление~~, ~~fullscreen~~, ~~theme~~, ~~подписка на события~~)
- [x] ~~плагин email~~

## alpha3
- [x] mqtt
- [x] cron (~~core~~, ~~api~~, ~~ui~~)

## alpha4
- [x] noolite
- [x] message hub (signalr)
- [x] telegram bot

## alpha5
- [x] i18n (~~core~~, ~~web~~, ~~strings~~)
- [x] бандлы для шаблонов
- [ ] web-ui (dashboards)

## alpha6
- [ ] видеонаблюдение
- [ ] графики
- [ ] http запросы (curl)

### hardware

- [ ] плагин для homebridge, загружающий устройства из TH и перенаправляющий запросы к нему

### protocols

- [ ] rabbitmq http://www.rabbitmq.com/dotnet.html

### messenger

- [ ] slack
- [ ] SMS

### others

- [ ] noolite web api (совместимо с API шлюза?)
- [ ] microclimate (Core, UI)
- [ ] weather https://tech.yandex.ru/weather/doc/dg/concepts/pricing-docpage/

- [ ] dynamic DNS [инструкция](https://habrahabr.ru/post/310534), [токены](https://pddimp.yandex.ru/api2/admin/get_token?domain_name=thinking-home.ru)
- [ ] audio ?
- [ ] twitter https://coretweet.github.io

====

- [ ] сделать поддержку нескольких СУБД

